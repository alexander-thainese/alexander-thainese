commands:
  grant-permission-temp:
    command:
      echo if not exist "C:\inetpub\wwwroot\App_Data" mkdir C:\inetpub\wwwroot\App_Data > "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat" & echo. if not exist "C:\inetpub\wwwroot\App_Data\Storage" mkdir C:\inetpub\wwwroot\App_Data\Storage >> "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat" & echo. icacls "C:\inetpub\wwwroot\App_Data\Storage" /grant IUSR:(OI)(CI)F >> "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat" & echo. icacls "C:\inetpub\wwwroot\App_Data\Storage" /grant IIS_IUSRS:(OI)(CI)F >> "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat" & echo. if not exist "C:\inetpub\wwwroot\App_Data\Source" mkdir C:\inetpub\wwwroot\App_Data\Source >> "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat" & echo. icacls "C:\inetpub\wwwroot\App_Data\Source" /grant IUSR:(OI)(CI)F >> "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat" & echo. icacls "C:\inetpub\wwwroot\App_Data\Source" /grant IIS_IUSRS:(OI)(CI)F >> "C:\Program Files\Amazon\ElasticBeanstalk\hooks\appdeploy\post\99custom.bat"
  set-auto-start:
    command:
      DISM /Online /Enable-Feature /FeatureName:IIS-ApplicationInit /All & C:\Windows\System32\inetsrv\appcmd set config /section:applicationPools /[name='DefaultAppPool'].autoStart:true & C:\Windows\System32\inetsrv\appcmd set config /section:applicationPools /[name='DefaultAppPool'].startMode:AlwaysRunning & C:\Windows\System32\inetsrv\appcmd set app "Default Web Site/" /preloadEnabled:true & C:\Windows\System32\inetsrv\appcmd set apppool /apppool.name:DefaultAppPool /recycling.periodicRestart.time:00:00:00 & C:\Windows\System32\inetsrv\appcmd set config /section:applicationPools /[name='DefaultAppPool'].processModel.idleTimeout:0.00:00:00 & C:\Windows\System32\inetsrv\appcmd.exe set app "Default Web Site/" /serviceAutoStartEnabled:true & iisreset