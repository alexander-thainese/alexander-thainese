<div class="cardContainer">
    <div style="width:100%; height:100%; box-sizing:border-box;">
        <cmt-element-detail [showContent]="showContent" [selectedObject]="selectedObject"
            [hideValueDetails]="hideValueDetails" [readonly]="readonly" (addElement)="addElement($event)"
            (cloneSchema)="showDialog($event)">
            <ng-content select="[header]" header></ng-content>
            <ng-content select="[body]" body></ng-content>
        </cmt-element-detail>
        <div class="cardContainer" style="padding-bottom:10px;">
            <mat-card class="left">
                <h2 style="padding-bottom:15px;">
                    <span style="line-height:24px; vertical-align:top; font-size: 20px;">{{ title }}</span>
                    <a *ngIf="showFilter" style="float:right;" (click)="toggleFilter()"
                        [ngClass]="{'filter-inactive': !isFilterActive}" title="{{filterMessage}}">
                        <mat-icon>&#xE152;</mat-icon>
                    </a>
                    <a *ngIf="showAddIcon && allowAddNew" (click)="showDialog()"
                        style="text-decoration:none; color:#313131;">
                        <mat-icon class="icon-style">&#xE147;</mat-icon>
                    </a>
                </h2>
                <div *ngIf="loading" style="margin: 0 auto; width:100px;">
                    <mat-progress-spinner mode="indeterminate" color="primary"></mat-progress-spinner>
                </div>
                <div *ngIf="!loading && errorMessage" class="error">Failed to download data. Click <a
                        (click)="updateData()">here</a> to try again</div>
                <div [hidden]="errorMessage" class="row" style="padding-top:0;">
                    <cmt-inline-search [displayText]="'Search'" [minLength]="3" (search)="onSearch($event)"
                        [nullValueText]="'Search'"></cmt-inline-search>
                </div>
                <div class="content">
                    <perfect-scrollbar class="treeview-ps">
                        <cmt-treelist-element *ngFor="let obj of data" [element]="obj" [rootId]="obj.Id" [lazyLoad]="lazyLoad">
                        </cmt-treelist-element>
                    </perfect-scrollbar>
                </div>
            </mat-card>
        </div>
    </div>
</div>
<style>
    .content {
        box-sizing: border-box;
        padding-bottom: 77px;
        height: 100%;
        max-height: 100%;
        margin: 0 -24px;
    }

    .cardContainer {
        max-height: calc(100vh - 64px);
        height: calc(100vh - 64px);
        overflow-y: hidden;
        width: auto;
    }

    .row>div {
        display: inline-block;
        width: 100%;
    }

    .row {
        margin: 0 -24px;
        padding: 0 24px;
    }

    .notifications {
        margin-bottom: 20px;
    }

    .left {
        padding-bottom: 0;
        overflow: hidden;
        height: 100%;
        max-height: 100%;
        margin-right: 20px;
    }

    cmt-element-detail:empty {
        display: none;
    }

    cmt-element-detail {
        float: right;
        width: 70%;
        padding-bottom: 10px;
        height: 100%;
    }

    .test {
        margin-bottom: 10px;
    }

    .icon-style {
        font-size: 24px;
        line-height: 24px;
        width: 24px;
        color: #1696E4;
    }

    .filter-inactive {
        color: #444;
    }

</style>
